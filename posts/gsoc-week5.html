<!DOCTYPE html>
<html prefix="og: http://ogp.me/ns# article: http://ogp.me/ns/article# " lang="en">
<head>
<meta charset="utf-8">
<meta name="description" content="Fith week of developing code-generation in SymPy for GSoC.">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Status update week 5 GSoC | Björn I. Dahlgren's personal page</title>
<link href="../assets/css/bootstrap.min.css" rel="stylesheet" type="text/css">
<link href="../assets/css/rst.css" rel="stylesheet" type="text/css">
<link href="../assets/css/code.css" rel="stylesheet" type="text/css">
<link href="../assets/css/colorbox.css" rel="stylesheet" type="text/css">
<link href="../assets/css/theme.css" rel="stylesheet" type="text/css">
<link href="../assets/css/ipython.min.css" rel="stylesheet" type="text/css">
<link href="../assets/css/nikola_ipython.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="alternate" type="application/rss+xml" title="RSS" href="../rss.xml">
<link rel="canonical" href="http://bjodah.github.io/blog/posts/gsoc-week5.html">
<!--[if lt IE 9]><script src="../assets/js/html5.js"></script><![endif]--><meta name="description" itemprop="description" content="Fith week of developing code-generation in SymPy for GSoC.">
<meta name="author" content="Björn Dahlgren">
<link rel="prev" href="gsoc-week4.html" title="Status update week 4 GSoC" type="text/html">
<link rel="next" href="gsoc-week6.html" title="Status update week 6 GSoC" type="text/html">
<meta property="og:site_name" content="Björn I. Dahlgren's personal page">
<meta property="og:title" content="Status update week 5 GSoC">
<meta property="og:url" content="http://bjodah.github.io/blog/posts/gsoc-week5.html">
<meta property="og:description" content="Fith week of developing code-generation in SymPy for GSoC.">
<meta property="og:type" content="article">
<meta property="article:published_time" content="2017-07-03T20:37:00+02:00">
<meta property="article:tag" content="Python">
<meta property="article:tag" content="SymPy">
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="http://bjodah.github.io/blog/">

                <span id="blog-title">Björn I. Dahlgren's personal page</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="../archive.html">Archive</a>
                </li>
<li>
<a href="../categories/index.html">Tags</a>
                </li>
<li>
<a href="../rss.xml">RSS feed</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<li>
    <a href="gsoc-week5.rst" id="sourcelink">Source</a>
    </li>

                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            
<article class="post-text h-entry hentry postpage" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title" itemprop="headline name"><a href="#" class="u-url">Status update week 5 GSoC</a></h1>

        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn">
                    Björn Dahlgren
            </span></p>
            <p class="dateline"><a href="#" rel="bookmark"><time class="published dt-published" datetime="2017-07-03T20:37:00+02:00" itemprop="datePublished" title="2017-07-03 20:37">2017-07-03 20:37</time></a></p>
                <p class="commentline">
        
    <a href="gsoc-week5.html#disqus_thread" data-disqus-identifier="cache/posts/170703-w5.html">Comments</a>


            
        </p>
<p class="sourceline"><a href="gsoc-week5.rst" id="sourcelink">Source</a></p>

                <meta name="description" itemprop="description" content="Fith week of developing code-generation in SymPy for GSoC.">
</div>
        

    </header><div class="e-content entry-content" itemprop="articleBody text">
    <div>
<div class="section" id="continued-work-on-tutorial-material">
<h2>Continued work on tutorial material</h2>
<p>Cross-platform work is always a bit tricky. Python does in general
a great job of allowing programs to access the filesystem, network etc
in an OS agnostic manner, but sometimes there is no way around having
to write special code for each platform. In Python that often means
that we will do runtime inspection:</p>
<pre class="literal-block">
&gt;&gt;&gt; sys.platform
'linux'  # or e.g. darwin
&gt;&gt;&gt; os.name
'posix'  # or e.g. nt
</pre>
<p>To add another dimension of complexity we sometimes deal with 32-bit
and sometimes 64-bit systems (most headaches are caused by pointer
sizes, size of <tt class="docutils literal">int</tt> and <tt class="docutils literal">long</tt>), in python we can get the size of
<tt class="docutils literal">int</tt> of the platform quite easily:</p>
<pre class="literal-block">
&gt;&gt;&gt; sys.maxsize - 2**63 + 1
0
</pre>
<p>when you, in addition to this, are doing code-generation, you are most
likely relying on a compiler. That is our third dimension of
complexity, on linux that (usually) translates to gcc &amp; llvm/clang
(but Intel's icc/ifort &amp; portland group compilers and not uncommon).
This third "dimension" has been the number one struggle the past
week (and in particular the <a class="reference external" href="https://github.com/sympy/scipy-2017-codegen-tutorial/issues/13">combination</a>
mingw/<a class="reference external" href="https://github.com/sympy/scipy-2017-codegen-tutorial/pull/14">windows</a>). At
this point I feel that it is not worthwhile to continue pursuing <tt class="docutils literal">mingw</tt>
support on Windows.</p>
<p>It is quite likely that a few of our attendees will have some
technical difficulties with system installed compilers. Therefore, I'm
particularly happy that we now have got our <a class="reference external" href="https://mybinder.org">binder</a> environment to work flawlessly. It took some
work to setup a <a class="reference external" href="https://github.com/sympy/scipy-2017-codegen-tutorial/blob/master/Dockerfile">Dockerfile</a>,
but now it feels reassuring to have this as a fall-back.</p>
</div>
<div class="section" id="work-on-sympy-for-version-1-1">
<h2>Work on SymPy for version 1.1</h2>
<p>The <a class="reference external" href="https://github.com/sympy/sympy/pull/12808">work</a> on the
<tt class="docutils literal">PythonCodePrinter</tt> has progressed since last week and should
hopefully soon be ready for merging. The purpose of this class is to
be stepping stone moving away from having e.g. <tt class="docutils literal">lambdify</tt> relying on
the StrPrinter, and instead use the <tt class="docutils literal">CodePrinter</tt> class in
<tt class="docutils literal">.printing.codeprinter</tt>. Changing the super class showed to be
trickier than first anticipiated (I thought it would be an afternoons
work at most). I originally planned to rename the original
<tt class="docutils literal">PythonPrinter</tt> to something more appropriate (<tt class="docutils literal">SymPyCodePrinter</tt>)
together with its convenience functions. However, since this would
incur a deprecation for only name change, it was decided that we will
have to live with the old naming (to avoid raising tons of deprecation
warnings in downstream projects).</p>
<p>We had identified two extensions we wanted to introduce to the
codegeneration/autowrap factilities before the v1.1 release:</p>
<ul class="simple">
<li>Kenneth Lyons (@ixjlyons) <a class="reference external" href="https://github.com/sympy/sympy/pull/12833">spear-headed</a> the effort to allow
custom CodeGen subclasses to be passed to <tt class="docutils literal">codegen</tt>
</li>
<li>...and Jason the <a class="reference external" href="https://github.com/sympy/sympy/pull/12843">changes</a> to the
<tt class="docutils literal">CythonWrapper</tt> to allow compiler arguments to be passed to
autowrap.</li>
</ul>
</div>
<div class="section" id="plans-for-the-upcoming-week">
<h2>Plans for the upcoming week</h2>
<p>With a release candidate of SymPy v1.1 out the door (an impressive
effort led by @asmeurer) and most cross-platform issues out of the
way, it is about time for the final iterations of the  tutorial
material (and hopefully iron out any related issues in the rc).</p>
<p>At the end of the week it's time for me to fly to the US to attend
SciPy 2017. I have high expectations and believe that it will be a
great catalyst for the rest of the summers work on code-generation.</p>
</div>
</div>
    </div>
    <aside class="postpromonav"><nav><ul itemprop="keywords" class="tags">
<li><a class="tag p-category" href="../categories/python.html" rel="tag">Python</a></li>
            <li><a class="tag p-category" href="../categories/sympy.html" rel="tag">SymPy</a></li>
        </ul>
<ul class="pager hidden-print">
<li class="previous">
                <a href="gsoc-week4.html" rel="prev" title="Status update week 4 GSoC">Previous post</a>
            </li>
            <li class="next">
                <a href="gsoc-week6.html" rel="next" title="Status update week 6 GSoC">Next post</a>
            </li>
        </ul></nav></aside><section class="comments hidden-print"><h2>Comments</h2>
        
        
        <div id="disqus_thread"></div>
        <script>
        var disqus_shortname ="bjodahgithubio",
            disqus_url="http://bjodah.github.io/blog/posts/gsoc-week5.html",
        disqus_title="Status update week 5 GSoC",
        disqus_identifier="cache/posts/170703-w5.html",
        disqus_config = function () {
            this.language = "en";
        };
        (function() {
            var dsq = document.createElement('script'); dsq.async = true;
            dsq.src = 'https://' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
    </script><noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a>
</noscript>
    <a href="https://disqus.com" class="dsq-brlink" rel="nofollow">Comments powered by <span class="logo-disqus">Disqus</span></a>


        </section></article><script>var disqus_shortname="bjodahgithubio";(function(){var a=document.createElement("script");a.async=true;a.src="https://"+disqus_shortname+".disqus.com/count.js";(document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]).appendChild(a)}());</script>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2017         <a href="mailto:bjodah@gmail.com">Björn Dahlgren</a> - Powered by         <a href="https://getnikola.com" rel="nofollow">Nikola</a>         
            
        </footer>
</div>
</div>


            <script src="../assets/js/jquery.min.js"></script><script src="../assets/js/bootstrap.min.js"></script><script src="../assets/js/moment-with-locales.min.js"></script><script src="../assets/js/fancydates.js"></script><script src="../assets/js/jquery.colorbox-min.js"></script><script>$('a.image-reference:not(.islink) img:not(.islink)').parent().colorbox({rel:"gal",maxWidth:"100%",maxHeight:"100%",scalePhotos:true});</script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates -->
</body>
</html>
